language: ruby
gemfile:
- gemfiles/travis.gemfile
rvm:
- 1.9.3
env:
  global:
  - secure: sllJOilCyZthkFuH+8fq8VStFOho5b+sc/zD1uIC0Riq+QKNQ6Fu9Wccph+gXStdb/nxLNm5LCeQBXX0spyoVTaV7VwGpX/gnAyJ1lcFVTqZbI+lcF3Oig6Kfdi68OS3D9Zhmx2Fmm1Y6HVi2Bm99TddLSXtfqnq4Jn6qiUA9F0=
  - secure: Z3nnq/cH6f3OkH6/iZL0JEIf832Vc4ojtUCPJq8wXtoPjN31qIwh7gHp7i5PBZupliOHrr0tEiintq5uOz1E6kPEFjApvKkxUaDeguDKfJDwp4CBxTkwsl5fwEFvUg5Qlzvpbbke3AlRR9YEWSysBhol4Z25Joi9YatSsVf3x7I=
  - secure: GzmLl3qJLShOu3ArR/WsPJXi8eAVhfylXVXcsLc2cNy0hGPDE30i8IpfE7lhYJSnCIcnN2Tk0I7sw51a7MGeNpokqYfuApJqGo5XFdXTWXGmBxmEvBT+7DfXiHWlfC2STCo1q77jEA/RfdQa9c8k69Tf5EuGB4v1zGfJTTjI9U4=
  matrix:
  - KITCHEN_INSTANCE='default-ubuntu-1204'
  - KITCHEN_INSTANCE='default-ubuntu-1004'
  - KITCHEN_INSTANCE='default-centos-64'
  - KITCHEN_INSTANCE='default-centos-53'
  - KITCHEN_INSTANCE='add-servers-ubuntu-1204'
  - KITCHEN_INSTANCE='add-servers-ubuntu-1004'
  - KITCHEN_INSTANCE='add-servers-centos-64'
  - KITCHEN_INSTANCE='add-servers-centos-53'
  - KITCHEN_INSTANCE='del-servers-ubuntu-1204'
  - KITCHEN_INSTANCE='del-servers-ubuntu-1004'
  - KITCHEN_INSTANCE='del-servers-centos-64'
  - KITCHEN_INSTANCE='del-servers-centos-53'
script:
- bundle exec foodcritic ./ -f 'any'
- bundle exec kitchen test $KITCHEN_INSTANCE
after_script:
- bundle exec kitchen destroy $KITCHEN_INSTANCE
notifications:
  email:
  - abutovich@qubell.com
